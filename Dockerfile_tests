FROM alpine:3.18.2

RUN apk update && \
    apk add --no-cache g++ gtest-dev gmock 

WORKDIR /app

COPY src/ ./src/
COPY tests/ ./tests/

RUN g++ -o diff-eq-solver-tests tests/*.cpp tests/*/*.cpp src/*/*.cpp src/equation_processor.cpp -lgtest -lgtest_main -lgmock -pthread

ENTRYPOINT [ "/app/diff-eq-solver-tests" ]
